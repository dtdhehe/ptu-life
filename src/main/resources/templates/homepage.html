<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <!-- bootstrap基础 -->
    <link rel="stylesheet"
          th:href="@{/js/bootstrap/css/bootstrap.min.css}" />
    <link rel="stylesheet"
          th:href="@{/js/bootstrap/css/font-awesome.min.css}" />
    <link rel="stylesheet" th:href="@{/js/bootstrap/css/animate.css}" />

    <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.1/css/bootstrap.min.css" rel="stylesheet">-->
    <!--<script src="http://cdn.static.runoob.com/libs/jquery/2.1.1/jquery.min.js"></script>-->
    <!--<script src="http://cdn.static.runoob.com/libs/bootstrap/3.3.7/js/bootstrap.min.js"></script>-->
</head>
<body style="background-color: #efefda">
    <!--导航栏-->
    <nav class="navbar-inverse visible-lg visible-md" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <a class="navbar-brand" href="http://www.ptu.edu.cn/">莆田学院</a>
            </div>
            <div>
                <ul class="nav navbar-nav">
                    <li class="active"><a>首页</a></li>
                    <li><a th:href="@{/ptu/homePageController/life}" >生活</a></li>
                </ul>
            </div>
            <div>
                <button type="button" class="btn btn-warning pull-right" style="margin-top: 10px">注册</button>
                <button type="button" class="btn btn-info pull-right" style="margin-top: 10px"  onclick="window.location.href = 'http://localhost:8080/index'">登录</button>
            </div>
        </div>
    </nav>
    <!--引入头文件-->
    <div th:replace="head.html"></div>
    <!--主体页面   新闻和标签-->
    <div class="container">
        <div class="row clearfix">
            <!--页数-->
            <input type="hidden" name="newsPage" id="newsPage"
                   value="0" />
            <!--新闻列表-->
            <div id="newsListDiv" class="col-md-8 column">
                <!--<div class="media well">-->
                    <!--<a href="#" class="pull-left"><img src="http://ibootstrap-file.b0.upaiyun.com/lorempixel.com/64/64/default.jpg" width="100px" height="100px" class="media-object" alt='' /></a>-->
                    <!--<div class="media-body">-->
                        <!--<h4 class="media-heading">-->
                            <!--<a href="#"> Nested media heading新闻一</a>-->
                        <!--</h4>  新闻一的内容： Cras sit amet nibh libero, in gravida nulla. Nulla vel metus scelerisque ante sollicitudin commodo. Cras purus odio, vestibulum in vulputate at, tempus viverra turpis.-->
                        <!--<p style="margin-top: 10px"><img alt="140x140" style="width: 30px; height: 30px;margin-right: 10px" src="http://ibootstrap-file.b0.upaiyun.com/lorempixel.com/140/140/default.jpg" class="img-circle" />dtdhehe</p>-->
                    <!--</div>-->
                <!--</div>-->
                <!--默认10条新闻，小于10条，不显示此按钮-->
                <button id="newsListButton" type="button" onclick="loadNewsList()" class="btn btn-default" style="display: none;height: 40px;width: 100%">加载更多</button>
                <button id="newsOver" type="button" class="btn btn-default" disabled="disabled" style="display: none;height: 40px;width: 100%">到底啦</button>
            </div>
            <div class="col-md-4 column">
                <!--热门标签-->
                <div>
                    <table class="table table-hover table-striped table-condensed">
                        <thead>
                        <tr>
                            <th colspan="2">热门标签</th>
                        </tr>
                        </thead>
                        <tbody>
                        <tr action="#">
                            <td>食堂阿姨</td>
                            <td>01/04/2012 </td>
                        </tr>
                        <tr class="success">
                            <td>宿舍</td>
                            <td>01/04/2012 </td>
                        </tr>
                        <tr class="error">
                            <td>教室</td>
                            <td>02/04/2012 </td>
                        </tr>
                        <tr class="warning">
                            <td> 标签1 </td>
                            <td> 03/04/2012 </td>
                        </tr>
                        <tr class="info">
                            <td> 标签2 </td>
                            <td> 04/04/2012   </td>
                        </tr>
                        </tbody>
                    </table>
                </div>

                <!--热门问答-->
                <div>
                    <div class="panel panel-info">
                        <div class="panel-heading">
                            <h3 class="panel-title">
                                热门问答
                                <span style="float:right;margin-right: 10px">热度</span>
                            </h3>
                        </div>
                        <div class="panel-body">
                            <div>
                                <a href="#">食堂鱼为什么不刮鱼鳞</a>
                                <span style="float:right;margin-right: 20px">80</span>

                            </div>
                            <hr/>
                            <div>
                                <a href="#"> 金荣楼为什么没有空调</a>
                                <span style="float:right;margin-right: 20px">160</span>

                            </div>
                        </div>
                        <div class="panel-footer">
                            <a href="#"> 查看更多</a>
                            <span style="float:right;margin-right: 20px">more</span>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
    <!--引入页脚-->
    <div th:replace="footer.html"></div>
    <!-- 全局js -->
    <script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
    <script type="text/javascript"
            th:src="@{/js/bootstrap/js/bootstrap.min.js}"></script>
    <!-- js 方法 -->
    <script th:inline="javascript">
        //<![CDATA[
        $(function () {
            //初始化函数
            //初始查询第一页数据
            var page = $("#newsPage").val();
            queryNews(page);
        });

        //加载新闻按钮
        function loadNewsList() {
            var page = $("#newsPage").val();
            page = page + 1;
            queryNews(page);
        }

        //查询全部新闻
        function queryNews(page) {
            var urls = [[@{/news/newsController/queryAllNews}]];
            $.ajax({
                url:urls,
                async:true,
                type:'POST',
                data:{
                    page:page,
                    //每页3条数据
                    size:3
                },
                success:function (data) {
                    if (data.status === "0"){
                        if (data.error_msg !== ""){
                            $("#newsListButton").css("display","none");
                            $("#newsOver").css("display","");
                        }
                        var newsList = data.object;
                        if (newsList.length >2){
                            $("#newsListButton").css("display","");
                        }
                        for (var i=0;i<newsList.length;i++){
                            var htmls =
                                "<div class='media well'>" +
                                "   <a href='#' class='pull-left'><img src='http://ibootstrap-file.b0.upaiyun.com/lorempixel.com/64/64/default.jpg' width='100px' height='100px' class='media-object' alt='' /></a>" +
                                "      <div class='media-body'>" +
                                "          <h4 class='media-heading'>" +
                                "              <a href='#'> "+newsList[i].newsTitle+"</a>" +
                                "          </h4>  "+newsList[i].newsDesc +
                                "          <p style='margin-top: 10px'><img alt='140x140' style='width: 30px; height: 30px;margin-right: 10px' src='http://ibootstrap-file.b0.upaiyun.com/lorempixel.com/140/140/default.jpg' class='img-circle' />"+newsList[i].newsAuthor+"</p>" +
                                "      </div>" +
                                "</div>";
                            //在新闻列表标签下追加
                            $("#newsListButton").before(htmls);
                        }
                    }else {
                        alert(data.error_msg);
                    }
                }
            });
        }

        //]]>
    </script>
</body>
</html>